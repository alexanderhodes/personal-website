---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import StructuredData from "../components/StructuredData.astro";

const projects = await getCollection("projects");
const sortedProjects = [...projects].sort((a, b) => {
  return new Date(b.data.start).getTime() - new Date(a.data.start).getTime();
});

const technologies = await getCollection("technologies", (item) => {
  return item.data.visible;
});

const posts = await getCollection("posts");
const sortedPosts = [...posts]
  .sort((a, b) => {
    return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
  })
  .slice(0, 3);

const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  name: "Alexander Hodes",
  jobTitle: "Full Stack Developer",
  url: Astro.site,
  worksFor: {
    "@type": "Organization",
    name: "b42",
    url: "https://www.b-42.com/",
  },
  knowsAbout: technologies.map((t) => t.data.title),
  sameAs: [],
};
---

<StructuredData data={personSchema} />
<Layout
  title="alexander - home"
  description="Full Stack Developer mit Expertise in React Native, Next.js, NestJS und mehr. Entdecke meine Projekte und Blog-Beiträge über moderne Webentwicklung."
  keywords="Full Stack Developer, React Native, Next.js, NestJS, Webentwicklung, Mobile App Development"
>
  <h1 class="text-3xl mb-2">hey, ich bin alexander!</h1>
  <h2 class="text-base mb-3">
    Full Stack Developer bei
    <a
      href="https://www.b-42.com/"
      target="_blank"
      rel="noopener noreferrer"
      class="link"
      aria-label="b42 (öffnet in neuem Tab)"
      >b42<span class="sr-only"> (öffnet in neuem Tab)</span></a
    >
  </h2>
  <h3 class="font-bold">früher</h3>
  <ul class="mb-3">
    <li>
      Full Stack Developer bei
      <a
        href="https://www.startnext.com/billless"
        target="_blank"
        rel="noopener noreferrer"
        class="link"
        aria-label="bill.less (öffnet in neuem Tab)"
        >bill.less<span class="sr-only"> (öffnet in neuem Tab)</span></a
      >
    </li>
    <li>
      Softwareentwickler bei
      <a
        href="https://groz-beckert.com/de/"
        target="_blank"
        rel="noopener noreferrer"
        class="link"
        aria-label="groz-beckert (öffnet in neuem Tab)"
        >groz-beckert<span class="sr-only"> (öffnet in neuem Tab)</span></a
      >
    </li>
    <li>
      System Engineer bei
      <a
        href="https://www.t-systems.com/de/de"
        target="_blank"
        rel="noopener noreferrer"
        class="link"
        aria-label="t-systems (öffnet in neuem Tab)"
        >t-systems<span class="sr-only"> (öffnet in neuem Tab)</span></a
      >
    </li>
  </ul>
  <h3 class="font-bold">Projekte</h3>
  <ul class="mb-3">
    {
      sortedProjects.map((project) => (
        <li>
          <a
            class="hover:underline decoration-2 underline-offset-2 hover:text-red-800"
            href={`/projekte/${project.slug}`}
          >
            {project.data.title}
          </a>
        </li>
      ))
    }
  </ul>
  <h3 class="font-bold">tech stack</h3>
  <p class="mb-3">{technologies.map((t) => t.data.title).join(", ")}</p>
  <h3 class="font-bold">neueste Blog Posts</h3>
  <ul class="mb-3">
    {
      sortedPosts.map((post) => (
        <li class="mb-2">
          <a
            class="hover:underline decoration-2 underline-offset-2 hover:text-red-800"
            href={`/blog/${post.slug}`}
          >
            {post.data.title}
          </a>
          <span class="text-sm text-gray-600 dark:text-gray-400 ml-2">
            {new Date(post.data.date).toLocaleDateString("de-DE", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })}
          </span>
        </li>
      ))
    }
  </ul>
  <p>
    <a href="/blog" class="link"> Alle Posts anzeigen → </a>
  </p>
</Layout>
